define(["ertoc/app","ertoc/data","dojo/dom","dojo/dom-style","dijit/registry","dojo/_base/array","dojo/dom-class","dojox/mobile/ListItem","dojo/query","dojo/on","dojo/date/locale"],function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l=[{description:"¼",value:.25,sufix:""},{description:"⅓",value:.33,sufix:""},{description:"½",value:.5,sufix:""},{description:"1",value:1,sufix:""},{description:"2",value:2,sufix:"s"},{description:"3",value:3,sufix:"s"}];return window.app.display={formatFoodValue:function(n){return(n==="0.0"||n==="0.00")&&(n='<span class="Minor">Trace<\/span>'),n=n.replace("-","*"),n===""&&(n="&nbsp;"),n},formatMeasurementValue:function(n){return n===""&&(n="&nbsp;"),n},resize:function(){window.app.trace("Window Width Resize : "+window.innerWidth),window.innerWidth>=1090?(s(".Div-Header-Small-Screen").forEach(function(n){r.set(n,"display","none")}),s(".Div-Header-Medium-Screen").forEach(function(n){r.set(n,"display","none")}),s(".Div-Header-Large-Screen").forEach(function(n){r.set(n,"display","")}),s(".Div-Info-Data-Small-Screen").forEach(function(n){r.set(n,"display","none")}),s(".Div-Info-Data-Medium-Screen").forEach(function(n){r.set(n,"display","none")}),s(".Div-Info-Data-Large-Screen").forEach(function(n){r.set(n,"display","")})):window.innerWidth>=820?(s(".Div-Header-Small-Screen").forEach(function(n){r.set(n,"display","none")}),s(".Div-Header-Medium-Screen").forEach(function(n){r.set(n,"display","")}),s(".Div-Header-Large-Screen").forEach(function(n){r.set(n,"display","none")}),s(".Div-Info-Data-Small-Screen").forEach(function(n){r.set(n,"display","none")}),s(".Div-Info-Data-Medium-Screen").forEach(function(n){r.set(n,"display","")}),s(".Div-Info-Data-Large-Screen").forEach(function(n){r.set(n,"display","none")})):window.innerWidth>=780?(s(".Div-Header-Small-Screen").forEach(function(n){r.set(n,"display","none")}),s(".Div-Header-Medium-Screen").forEach(function(n){r.set(n,"display","none")}),s(".Div-Header-Large-Screen").forEach(function(n){r.set(n,"display","")}),s(".Div-Info-Data-Small-Screen").forEach(function(n){r.set(n,"display","none")}),s(".Div-Info-Data-Medium-Screen").forEach(function(n){r.set(n,"display","none")}),s(".Div-Info-Data-Large-Screen").forEach(function(n){r.set(n,"display","")})):window.innerWidth>=470?(s(".Div-Header-Small-Screen").forEach(function(n){r.set(n,"display","none")}),s(".Div-Header-Medium-Screen").forEach(function(n){r.set(n,"display","")}),s(".Div-Header-Large-Screen").forEach(function(n){r.set(n,"display","none")}),s(".Div-Info-Data-Small-Screen").forEach(function(n){r.set(n,"display","none")}),s(".Div-Info-Data-Medium-Screen").forEach(function(n){r.set(n,"display","")}),s(".Div-Info-Data-Large-Screen").forEach(function(n){r.set(n,"display","none")})):(s(".Div-Header-Small-Screen").forEach(function(n){r.set(n,"display","")}),s(".Div-Header-Medium-Screen").forEach(function(n){r.set(n,"display","none")}),s(".Div-Header-Large-Screen").forEach(function(n){r.set(n,"display","none")}),s(".Div-Info-Data-Small-Screen").forEach(function(n){r.set(n,"display","")}),s(".Div-Info-Data-Medium-Screen").forEach(function(n){r.set(n,"display","none")}),s(".Div-Info-Data-Large-Screen").forEach(function(n){r.set(n,"display","none")})),s(".Div-Hide-WhenLarge").forEach(function(t){window.innerWidth>=n.tabletSize?r.set(t,"display","none"):r.set(t,"display","")}),s(".Div-Hide-WhenSmall").forEach(function(t){if(window.innerWidth<=n.phoneSize){var i=u.byId(t.id);i&&i.set("label","")}})},clearAll:function(){window.app.display.clearWeekListing(),window.app.display.clearDayListing(),window.app.display.clearSearchPhrase(),window.app.display.clearSearchListing()},destroyDescendants:function(n){var t=u.byId(n);t&&(f.forEach(t.getChildren(),function(n){n.clickHandler!==undefined&&(n.clickHandler.remove(),n.clickHandler=undefined)}),t.destroyDescendants())},destroyInnerHTML:function(n){var t=i.byId(n);t&&(t.innerHTML="")},destroyValue:function(n){var t=u.byId(n);t&&t.set("value","")},hideElement:function(n){var t=u.byId(n);t&&r.set(t,"display","none")},showElement:function(n){var t=u.byId(n);t&&r.set(t,"display","")},showPopupMenu:function(){var t=i.byId("menuPopup");t&&(r.get(t,"display")==="block"?n.display.hidePopupMenu():r.set(t,"display",""))},hidePopupMenu:function(){var n=i.byId("menuPopup");n&&r.set(n,"display","none")},hideChangeTime:function(){var n;n=i.byId("timePickerNewMeasurement"),n&&r.set(n,"display","none"),n=i.byId("labelNewMeasurementTime"),n&&r.set(n,"display",""),n=i.byId("buttonNewMeasurementChangeTime"),n&&r.set(n,"display",""),n=i.byId("timePickerUpdateMeasurement"),n&&r.set(n,"display","none"),n=i.byId("labelUpdateMeasurementTime"),n&&r.set(n,"display",""),n=i.byId("buttonUpdateMeasurementChangeTime"),n&&r.set(n,"display","");var e=new Date,t=e.getHours(),f=e.getMinutes();n=u.byId("timePickerNewMeasurement"),n&&n.set("values",[t,f]),n=u.byId("timePickerUpdateMeasurement"),n&&n.set("values",[t,f]),n=i.byId("labelNewMeasurementTime"),n&&(n.innerHTML=t+":"+f),n=i.byId("labelUpdateMeasurementTime"),n&&(n.innerHTML=t+":"+f)},showChangeTime:function(){var n;n=i.byId("timePickerNewMeasurement"),n&&r.set(n,"display",""),n=i.byId("labelNewMeasurementTime"),n&&r.set(n,"display","none"),n=i.byId("buttonNewMeasurementChangeTime"),n&&r.set(n,"display","none"),n=i.byId("timePickerUpdateMeasurement"),n&&r.set(n,"display",""),n=i.byId("labelUpdateMeasurementTime"),n&&r.set(n,"display","none"),n=i.byId("buttonUpdateMeasurementChangeTime"),n&&r.set(n,"display","none")},clearWeekListing:function(){n.display.destroyInnerHTML("spanFoodWeekName"),n.display.destroyInnerHTML("spanMeasurementWeekName"),n.display.destroyDescendants("listFoodEntrySummaries"),n.display.destroyDescendants("listMeasurementEntrySummaries")},clearDayListing:function(){n.display.destroyDescendants("listFoodEntries"),n.display.destroyDescendants("listMeasurementEntries")},clearSearchPhrase:function(){n.display.destroyValue("InputSearchTerm")},clearSearchListing:function(){n.display.destroyDescendants("listSearchMatches"),n.display.hideElement("listSearchMatches"),n.display.hideElement("buttonMoreSearchMatches")},clearHistoryListing:function(){n.display.destroyDescendants("listHistoryEntries"),n.display.hideElement("listHistoryEntries")},clearLog:function(){n.display.destroyDescendants("listDataLog")},connectError:function(){n.showDialog("DialogLoginError")},inputError:function(t,r,u){i.byId("divClientTitle").innerHTML=t,i.byId("divClientMessage").innerHTML=r,n.showDialog("DialogClientMessage",u)},dataError:function(){window.alert("data Error: "+t.latestError)},serverMessage:function(){i.byId("divServerMessage").innerHTML=t.latestMessage,n.showDialog("DialogServerMessage")},disableButtons:function(){e.add("buttonFoodNextWeek","mblButtonDisabled"),e.add("buttonFoodPriorWeek","mblButtonDisabled"),e.add("buttonMeasurementNextWeek","mblButtonDisabled"),e.add("buttonMeasurementPriorWeek","mblButtonDisabled"),e.add("buttonFoodTommorow","mblButtonDisabled"),e.add("buttonFoodYesterday","mblButtonDisabled"),e.add("buttonMeasurementTommorow","mblButtonDisabled"),e.add("buttonMeasurementYesterday","mblButtonDisabled")},enableButtons:function(){e.remove("buttonFoodNextWeek","mblButtonDisabled"),e.remove("buttonFoodPriorWeek","mblButtonDisabled"),e.remove("buttonMeasurementNextWeek","mblButtonDisabled"),e.remove("buttonMeasurementPriorWeek","mblButtonDisabled"),e.remove("buttonFoodTommorow","mblButtonDisabled"),e.remove("buttonFoodYesterday","mblButtonDisabled"),e.remove("buttonMeasurementTommorow","mblButtonDisabled"),e.remove("buttonMeasurementYesterday","mblButtonDisabled")},adjustValuePicker:function(){var n=this.get("value").toUpperCase();this.id==="valuePickerNewFoodUnit"?n==="GRAM"?(r.set("valuePickerNewFoodQuantityMetric100","display",""),r.set("valuePickerNewFoodQuantityMetric10","display",""),r.set("valuePickerNewFoodQuantityMetric1","display",""),r.set("valuePickerNewFoodQuantityImperial","display","none"),r.set("valuePickerNewFoodQuantityImperialFraction","display","none")):n==="OZ"&&(r.set("valuePickerNewFoodQuantityMetric100","display","none"),r.set("valuePickerNewFoodQuantityMetric10","display","none"),r.set("valuePickerNewFoodQuantityMetric1","display","none"),r.set("valuePickerNewFoodQuantityImperial","display",""),r.set("valuePickerNewFoodQuantityImperialFraction","display","")):this.id==="valuePickerUpdateFoodUnit"?n==="GRAM"?(r.set("valuePickerUpdateFoodQuantityMetric100","display",""),r.set("valuePickerUpdateFoodQuantityMetric10","display",""),r.set("valuePickerUpdateFoodQuantityMetric1","display",""),r.set("valuePickerUpdateFoodQuantityImperial","display","none"),r.set("valuePickerUpdateFoodQuantityImperialFraction","display","none")):n==="OZ"&&(r.set("valuePickerUpdateFoodQuantityMetric100","display","none"),r.set("valuePickerUpdateFoodQuantityMetric10","display","none"),r.set("valuePickerUpdateFoodQuantityMetric1","display","none"),r.set("valuePickerUpdateFoodQuantityImperial","display",""),r.set("valuePickerUpdateFoodQuantityImperialFraction","display","")):this.id==="valuePickerNewMeasurementUnit"?n==="ST LB"?(r.set("valuePickerNewMeasurementQuantityKG","display","none"),r.set("valuePickerNewMeasurementQuantityG","display","none"),r.set("valuePickerNewMeasurementQuantityLBS","display","none"),r.set("valuePickerNewMeasurementQuantityST","display",""),r.set("valuePickerNewMeasurementQuantityLB","display",""),r.set("valuePickerNewMeasurementQuantityHR","display","none"),r.set("valuePickerNewMeasurementQuantityQT","display","none"),r.set("valuePickerNewMeasurementQuantityMIN","display","none")):n==="LBS"?(r.set("valuePickerNewMeasurementQuantityKG","display","none"),r.set("valuePickerNewMeasurementQuantityG","display","none"),r.set("valuePickerNewMeasurementQuantityLBS","display",""),r.set("valuePickerNewMeasurementQuantityST","display","none"),r.set("valuePickerNewMeasurementQuantityLB","display","none"),r.set("valuePickerNewMeasurementQuantityHR","display","none"),r.set("valuePickerNewMeasurementQuantityQT","display","none"),r.set("valuePickerNewMeasurementQuantityMIN","display","none")):n==="KG"?(r.set("valuePickerNewMeasurementQuantityKG","display",""),r.set("valuePickerNewMeasurementQuantityG","display",""),r.set("valuePickerNewMeasurementQuantityLBS","display","none"),r.set("valuePickerNewMeasurementQuantityST","display","none"),r.set("valuePickerNewMeasurementQuantityLB","display","none"),r.set("valuePickerNewMeasurementQuantityHR","display","none"),r.set("valuePickerNewMeasurementQuantityQT","display","none"),r.set("valuePickerNewMeasurementQuantityMIN","display","none")):n==="HR"?(r.set("valuePickerNewMeasurementQuantityKG","display","none"),r.set("valuePickerNewMeasurementQuantityG","display","none"),r.set("valuePickerNewMeasurementQuantityLBS","display","none"),r.set("valuePickerNewMeasurementQuantityST","display","none"),r.set("valuePickerNewMeasurementQuantityLB","display","none"),r.set("valuePickerNewMeasurementQuantityHR","display",""),r.set("valuePickerNewMeasurementQuantityQT","display",""),r.set("valuePickerNewMeasurementQuantityMIN","display","none")):n==="MIN"&&(r.set("valuePickerNewMeasurementQuantityKG","display","none"),r.set("valuePickerNewMeasurementQuantityG","display","none"),r.set("valuePickerNewMeasurementQuantityLBS","display","none"),r.set("valuePickerNewMeasurementQuantityST","display","none"),r.set("valuePickerNewMeasurementQuantityLB","display","none"),r.set("valuePickerNewMeasurementQuantityHR","display","none"),r.set("valuePickerNewMeasurementQuantityQT","display","none"),r.set("valuePickerNewMeasurementQuantityMIN","display","")):this.id==="valuePickerUpdateMeasurementUnit"&&(n==="ST LB"?(r.set("valuePickerUpdateMeasurementQuantityKG","display","none"),r.set("valuePickerUpdateMeasurementQuantityG","display","none"),r.set("valuePickerUpdateMeasurementQuantityLBS","display","none"),r.set("valuePickerUpdateMeasurementQuantityST","display",""),r.set("valuePickerUpdateMeasurementQuantityLB","display",""),r.set("valuePickerUpdateMeasurementQuantityHR","display","none"),r.set("valuePickerUpdateMeasurementQuantityQT","display","none"),r.set("valuePickerUpdateMeasurementQuantityMIN","display","none")):n==="LBS"?(r.set("valuePickerUpdateMeasurementQuantityKG","display","none"),r.set("valuePickerUpdateMeasurementQuantityG","display","none"),r.set("valuePickerUpdateMeasurementQuantityLBS","display",""),r.set("valuePickerUpdateMeasurementQuantityST","display","none"),r.set("valuePickerUpdateMeasurementQuantityLB","display","none"),r.set("valuePickerUpdateMeasurementQuantityHR","display","none"),r.set("valuePickerUpdateMeasurementQuantityQT","display","none"),r.set("valuePickerUpdateMeasurementQuantityMIN","display","none")):n==="KG"?(r.set("valuePickerUpdateMeasurementQuantityKG","display",""),r.set("valuePickerUpdateMeasurementQuantityG","display",""),r.set("valuePickerUpdateMeasurementQuantityLBS","display","none"),r.set("valuePickerUpdateMeasurementQuantityST","display","none"),r.set("valuePickerUpdateMeasurementQuantityLB","display","none"),r.set("valuePickerUpdateMeasurementQuantityHR","display","none"),r.set("valuePickerUpdateMeasurementQuantityQT","display","none"),r.set("valuePickerUpdateMeasurementQuantityMIN","display","none")):n==="HR"?(r.set("valuePickerUpdateMeasurementQuantityKG","display","none"),r.set("valuePickerUpdateMeasurementQuantityG","display","none"),r.set("valuePickerUpdateMeasurementQuantityLBS","display","none"),r.set("valuePickerUpdateMeasurementQuantityST","display","none"),r.set("valuePickerUpdateMeasurementQuantityLB","display","none"),r.set("valuePickerUpdateMeasurementQuantityHR","display",""),r.set("valuePickerUpdateMeasurementQuantityQT","display",""),r.set("valuePickerUpdateMeasurementQuantityMIN","display","none")):n==="MIN"&&(r.set("valuePickerUpdateMeasurementQuantityKG","display","none"),r.set("valuePickerUpdateMeasurementQuantityG","display","none"),r.set("valuePickerUpdateMeasurementQuantityLBS","display","none"),r.set("valuePickerUpdateMeasurementQuantityST","display","none"),r.set("valuePickerUpdateMeasurementQuantityLB","display","none"),r.set("valuePickerUpdateMeasurementQuantityHR","display","none"),r.set("valuePickerUpdateMeasurementQuantityQT","display","none"),r.set("valuePickerUpdateMeasurementQuantityMIN","display","")))},connectedMenu:function(n){r.set("imgSplash","display","none"),s(".ShowOnConnect").forEach(function(n){r.set(n,"display","")}),s(".ShowOnDisconnect").forEach(function(n){r.set(n,"display","none")}),n===!0&&s(".HideOnAnonymous").forEach(function(n){r.set(n,"display","none")})},disConnectedMenu:function(){s(".ShowOnConnect").forEach(function(n){r.set(n,"display","none")}),s(".ShowOnDisconnect").forEach(function(n){r.set(n,"display","")})},anonymousUserForms:function(){r.set("divAnonymousUserLogout","display",""),r.set("divExistingUserLogout","display","none")},existingUserForms:function(){r.set("divAnonymousUserLogout","display","none"),r.set("divExistingUserLogout","display","")},weekListing:function(){var e=window.app.data.selectedWeek,r,t,i,s='<div class="Div-Info-Data-Large-Screen">                                 <div class="Div-Info-Data"      >[SUMMARY.SALT1]<\/div>                 <div class="Div-Info-Data"      >[SUMMARY.FIBRE1]<\/div>                <div class="Div-Info-Data-light">[SUMMARY.SATURATEFAT1]<\/div>          <div class="Div-Info-Data"      >[SUMMARY.FAT1]<\/div>                  <div class="Div-Info-Data-light">[SUMMARY.SUGARS1]<\/div>               <div class="Div-Info-Data"      >[SUMMARY.CARBOHYDRATES1]<\/div>        <div class="Div-Info-Data"      >[SUMMARY.PROTEIN1]<\/div>              <div class="Div-Info-Data"      >[SUMMARY.CALORIES1]<\/div>           <\/div>                                                                 <div class="Div-Info-Data-Medium-Screen">                                <div class="Div-Info-Data"      >[SUMMARY.FAT2]<\/div>                  <div class="Div-Info-Data"      >[SUMMARY.CARBOHYDRATES2]<\/div>        <div class="Div-Info-Data"      >[SUMMARY.PROTEIN2]<\/div>              <div class="Div-Info-Data"      >[SUMMARY.CALORIES2]<\/div>           <\/div>                                                                 <div class="Div-Info-Data-Small-Screen">                                 <div class="Div-Info-Data">[SUMMARY.CALORIES3]<\/div>                 <\/div>                                                                 <div class="Div-Info-Title-Left">                                        <span>[SUMMARY.NAME]<\/span>                                          <\/div>                                                                 ',c='<div  class="Div-Header-Large-Screen" >                                                       <div class="Div-Info-Data-Wide ">[SUMMARY.BLOODPRESSURE]<\/div>                              <div class="Div-Info-Data-Wide ">[SUMMARY.WEIGHT1]<\/div>                                    <div class="Div-Info-Data-Wide ">[SUMMARY.EXERCISE]<\/div>                                 <\/div>                                                                                      <div class="Div-Header-Small-Screen">                                                         <div class="Div-Info-Data-Wide ">[SUMMARY.WEIGHT2]<\/div>                                  <\/div>                                                                                      <div class="Div-Info-Title-Left">                                                             <span>[SUMMARY.NAME]<\/span>                                                               <\/div>                                                                                      ';r=u.byId("listFoodEntrySummaries"),t='<div class="Div-Header-Large-Screen">                                                                  <div class="Div-Info-Header-Small      "                                 >Salt<\/div>                 <div class="Div-Info-Header-Small      "                                 >Fibre<\/div>                <div class="Div-Info-Header-Small-Down "   style="; text-indent:-20px"   >Saturated Fat<\/div>        <div class="Div-Info-Header-Small-Up   "                                 >Fat<\/div>                  <div class="Div-Info-Header-Small-Down "   style="; text-indent:-10px"   >Sugars<\/div>               <div class="Div-Info-Header-Small-Up   "   style="; text-indent: 20px"   >Carbohydrates<\/div>        <div class="Div-Info-Header-Small      "                                 >Protein<\/div>              <div class="Div-Info-Header-Small      "                                 >Calories<\/div>           <\/div>                                                                                               <div class="Div-Header-Medium-Screen">                                                                 <div class="Div-Info-Header-Small      "                                 >Fat<\/div>                  <div class="Div-Info-Header-Small      "                                 >Carbs.<\/div>               <div class="Div-Info-Header-Small      "                                 >Protein<\/div>              <div class="Div-Info-Header-Small      "                                 >Calories<\/div>           <\/div>                                                                                               <div class="Div-Header-Small-Screen">                                                                  <div class="Div-Info-Header-Small">Calories<\/div>                                                  <\/div>                                                                                               <div class="Div-Info-Title-Left">                                                                      <span>[WEEK.NAME]<\/span>                                                                           <\/div>                                                                                               '.replace("[WEEK.NAME]",e.name),i=new o,i.set("innerHTML",t),r.addChild(i),f.forEach(e.dailySummaries,function(u){t=s,t=t.replace("[SUMMARY.NAME]",u.dayName),t=t.replace("[SUMMARY.CALORIES1]",n.display.formatFoodValue(u.caloriesPerDay)),t=t.replace("[SUMMARY.PROTEIN1]",n.display.formatFoodValue(u.proteinPerDay)),t=t.replace("[SUMMARY.CARBOHYDRATES1]",n.display.formatFoodValue(u.carbohydratePerDay)),t=t.replace("[SUMMARY.SUGARS1]",n.display.formatFoodValue(u.fatPerDay)),t=t.replace("[SUMMARY.FAT1]",n.display.formatFoodValue(u.sugarPerDay)),t=t.replace("[SUMMARY.SATURATEFAT1]",n.display.formatFoodValue(u.saturatedFatPerDay)),t=t.replace("[SUMMARY.FIBRE1]",n.display.formatFoodValue(u.fibrePerDay)),t=t.replace("[SUMMARY.SALT1]",n.display.formatFoodValue(u.saltPerDay)),t=t.replace("[SUMMARY.CALORIES2]",n.display.formatFoodValue(u.caloriesPerDay)),t=t.replace("[SUMMARY.PROTEIN2]",n.display.formatFoodValue(u.proteinPerDay)),t=t.replace("[SUMMARY.CARBOHYDRATES2]",n.display.formatFoodValue(u.carbohydratePerDay)),t=t.replace("[SUMMARY.FAT2]",n.display.formatFoodValue(u.sugarPerDay)),t=t.replace("[SUMMARY.CALORIES3]",n.display.formatFoodValue(u.caloriesPerDay)),i=new o,i.set("moveTo","viewDailyFoodEntries"),i.set("variableHeight",!0),i.set("innerHTML",t),i.clickHandler=h(i,"click",function(t){return function(){n.actions.showDay(t)}}(u.dayName)),r.addChild(i)}),r=u.byId("listMeasurementEntrySummaries"),t='<div class="Div-Header-Large-Screen">                                                         <div class="Div-Info-Header-Small-Wide       ">BP<\/div>                                     <div class="Div-Info-Header-Small-Wide       ">Weight (KG)<\/div>                            <div class="Div-Info-Header-Small-Wide       ">Exercise (Hr:Min)<\/div>                    <\/div>                                                                                      <div class="Div-Header-Small-Screen">                                                         <div class="Div-Info-Header-Small      ">Weight<\/div>                                     <\/div>                                                                                      <div class="Div-Info-Title-Left">                                                             <span>[WEEK.NAME]<\/span>                                                                  <\/div>                                                                                      '.replace("[WEEK.NAME]",e.name),i=new o,i.set("innerHTML",t),r.addChild(i),f.forEach(e.dailySummaries,function(u){t=c,i=new o,t=t.replace("[SUMMARY.NAME]",u.dayName),t=t.replace("[SUMMARY.BLOODPRESSURE]",n.display.formatMeasurementValue(u.bloodPressureAverage)),t=t.replace("[SUMMARY.WEIGHT1]",n.display.formatMeasurementValue(u.weightAverage)),t=t.replace("[SUMMARY.WEIGHT2]",n.display.formatMeasurementValue(u.weightAverage)),t=t.replace("[SUMMARY.EXERCISE]",n.display.formatMeasurementValue(u.exerciseTotal)),i.set("moveTo","viewDailyMeasurementEntries"),i.set("variableHeight",!0),i.set("innerHTML",t),i.clickHandler=h(i,"click",function(t){return function(){n.actions.showDay(t)}}(u.dayName)),r.addChild(i)}),window.app.display.resize()},dayListing:function(){var c=window.app.data.selectedDay,e,t,i,l,s,r=[];r.push(new o({label:"Snacks"})),r.push(new o({label:"Dinner"})),r.push(new o({label:"Lunch"})),r.push(new o({label:"Breakfast"}));var a='<div class="Div-Header-Large-Screen">                                      <div     class="Div-Info-Data"      >[ITEM.SALT1]<\/div>                  <div     class="Div-Info-Data"      >[ITEM.FIBRE1]<\/div>                 <div     class="Div-Info-Data-light">[ITEM.SATURATEFAT1]<\/div>           <div     class="Div-Info-Data"      >[ITEM.FAT1]<\/div>                   <div     class="Div-Info-Data-light">[ITEM.SUGARS1]<\/div>                <div     class="Div-Info-Data"      >[ITEM.CARBOHYDRATES1]<\/div>         <div     class="Div-Info-Data"      >[ITEM.PROTEIN1]<\/div>               <div     class="Div-Info-Data"      >[ITEM.CALORIES1]<\/div>            <\/div>                                                                   <div class="Div-Header-Medium-Screen">                                      <div     class="Div-Info-Data"      >[ITEM.FAT2]<\/div>                   <div     class="Div-Info-Data"      >[ITEM.CARBOHYDRATES2]<\/div>         <div     class="Div-Info-Data"      >[ITEM.PROTEIN2]<\/div>               <div     class="Div-Info-Data"      >[ITEM.CALORIES2]<\/div>            <\/div>                                                                   <div class="Div-Header-Small-Screen" >                                     <div class="Div-Info-Data      ">[ITEM.CALORIES3]<\/div>                <\/div>                                                                   <div class="Div-Info-Title-Left" >                                         <span class="Span-Info-Quantity"    >[ITEM.QUANTITY]<\/span>              <span class="Span-Info-Insert-Small">[ITEM.SERVINGSIZE]<\/span>           <span class="Span-Info-Description" >[ITEM.FOODNAME]<\/span>            <\/div>                                                                   ',v='<div class="Div-Header-Large-Screen">                                      <div     class="Div-Summary-Data"       >[ITEM.SALT1]<\/div>              <div     class="Div-Summary-Data"       >[ITEM.FIBRE1]<\/div>             <div     class="Div-Summary-Data-light" >[ITEM.SATURATEFAT1]<\/div>       <div     class="Div-Summary-Data"       >[ITEM.FAT1]<\/div>               <div     class="Div-Summary-Data-light" >[ITEM.SUGARS1]<\/div>            <div     class="Div-Summary-Data"       >[ITEM.CARBOHYDRATES1]<\/div>     <div     class="Div-Summary-Data"       >[ITEM.PROTEIN1]<\/div>           <div     class="Div-Summary-Data"       >[ITEM.CALORIES1]<\/div>        <\/div>                                                                   <div class="Div-Header-Medium-Screen">                                     <div     class="Div-Summary-Data"       >[ITEM.FAT2]<\/div>               <div     class="Div-Summary-Data"       >[ITEM.CARBOHYDRATES2]<\/div>     <div     class="Div-Summary-Data"       >[ITEM.PROTEIN2]<\/div>           <div     class="Div-Summary-Data"       >[ITEM.CALORIES2]<\/div>        <\/div>                                                                   <div class="Div-Header-Small-Screen" >                                     <div class="Div-Summary-Data            ">[ITEM.CALORIES3]<\/div>       <\/div>                                                                   ',y='<div class="Div-Info-Details">                                                  <div      class="Div-Info-Data-Wide ">                                          <div    class="Div-Info-Value">[ITEM.VALUE]<\/div>                             <div    class="Div-Info-Unit">[ITEM.UNITNAME]<\/div>                         <\/div>                                                                        <div>                                                                             <span   class="Span-Info-Description" >[ITEM.MEASUREMENTNAME]<\/span>          <span   class="Span-Info-Insert-Small" >[ITEM.ENTRYTIME]<\/span>           <\/div>                                                                      <\/div>                                                                        ';for(e=u.byId("listFoodEntries"),t='<div class="Div-Header-Large-Screen">                                                  <div class="Div-Info-Header-Small      "                                 >Salt<\/div>                      <div class="Div-Info-Header-Small      "                                 >Fibre<\/div>                     <div class="Div-Info-Header-Small-Down "   style="; text-indent:-20px"   >Saturated Fat<\/div>             <div class="Div-Info-Header-Small-Up   "                                 >Fat<\/div>                       <div class="Div-Info-Header-Small-Down "   style="; text-indent:-10px"   >Sugars<\/div>                    <div class="Div-Info-Header-Small-Up   "   style="; text-indent: 20px"   >Carbohydrates<\/div>             <div class="Div-Info-Header-Small      "                                 >Protein<\/div>                   <div class="Div-Info-Header-Small      "                                 >Calories<\/div>                <\/div>                                                                                                    <div class="Div-Header-Medium-Screen">                                                  <div class="Div-Info-Header-Small      "                                 >Fat<\/div>                       <div class="Div-Info-Header-Small      "                                 >Carbohydrates<\/div>             <div class="Div-Info-Header-Small      "                                 >Protein<\/div>                   <div class="Div-Info-Header-Small      "                                 >Calories<\/div>                <\/div>                                                                                                    <div class="Div-Header-Small-Screen">                                                                       <div class="Div-Info-Header-Small      ">Calories<\/div>                                                 <\/div>                                                                                                    <div class="Div-Info-Title-Left">                                                                           <span>[DAY.NAME]<\/span>                                                                                 <\/div>                                                                                                    '.replace("[DAY.NAME]",c.name),i=new o,i.set("innerHTML",t),e.addChild(i),r.length>0&&e.addChild(r.pop()),f.forEach(c.foodEntryDetails,function(u){if(u.entryTime==="101")while(r.length>3)e.addChild(r.pop());else if(u.entryTime==="102")while(r.length>2)e.addChild(r.pop());else if(u.entryTime==="103")while(r.length>1)e.addChild(r.pop());else if(u.entryTime==="104")while(r.length>0)e.addChild(r.pop());u.foodEntryGuid==="SUMMARY"?(u.entryTime==="101"?s="Breakfast":u.entryTime==="102"?s="Lunch":u.entryTime==="103"?s="Dinner":u.entryTime==="104"&&(s="Snacks"),l="Add to "+s,u.caloriesPerEntry&&(t=v,t=t.replace("[ITEM.CALORIES1]",n.display.formatFoodValue(u.caloriesPerEntry)),t=t.replace("[ITEM.PROTEIN1]",n.display.formatFoodValue(u.proteinPerEntry)),t=t.replace("[ITEM.CARBOHYDRATES1]",n.display.formatFoodValue(u.carbohydratePerEntry)),t=t.replace("[ITEM.SUGARS1]",n.display.formatFoodValue(u.sugarPerEntry)),t=t.replace("[ITEM.FAT1]",n.display.formatFoodValue(u.fatPerEntry)),t=t.replace("[ITEM.SATURATEFAT1]",n.display.formatFoodValue(u.saturatedFatPerEntry)),t=t.replace("[ITEM.FIBRE1]",n.display.formatFoodValue(u.fibrePerEntry)),t=t.replace("[ITEM.SALT1]",n.display.formatFoodValue(u.saltPerEntry)),t=t.replace("[ITEM.CALORIES2]",n.display.formatFoodValue(u.caloriesPerEntry)),t=t.replace("[ITEM.PROTEIN2]",n.display.formatFoodValue(u.proteinPerEntry)),t=t.replace("[ITEM.CARBOHYDRATES2]",n.display.formatFoodValue(u.carbohydratePerEntry)),t=t.replace("[ITEM.FAT2]",n.display.formatFoodValue(u.fatPerEntry)),t=t.replace("[ITEM.CALORIES3]",n.display.formatFoodValue(u.caloriesPerEntry)),i=new o,i.set("innerHTML",t),e.addChild(i)),i=new o,i.set("rightText",l),i.set("moveTo","viewNewFoodEntrySource"),i.clickHandler=h(i,"click",function(t){return function(){n.actions.showFoodEntryOptions("CURRENT",t,"viewDailyFoodEntries")}}(s)),e.addChild(i)):(t=a,t=t.replace("[ITEM.FOODNAME]",u.foodName.capitalizeWords()),t=t.replace("[ITEM.SERVINGSIZE]",u.servingSize),t=t.replace("[ITEM.QUANTITY]",u.amount+" "+u.unitName),t=t.replace("[ITEM.CALORIES1]",n.display.formatFoodValue(u.caloriesPerEntry)),t=t.replace("[ITEM.PROTEIN1]",n.display.formatFoodValue(u.proteinPerEntry)),t=t.replace("[ITEM.CARBOHYDRATES1]",n.display.formatFoodValue(u.carbohydratePerEntry)),t=t.replace("[ITEM.SUGARS1]",n.display.formatFoodValue(u.sugarPerEntry)),t=t.replace("[ITEM.FAT1]",n.display.formatFoodValue(u.fatPerEntry)),t=t.replace("[ITEM.SATURATEFAT1]",n.display.formatFoodValue(u.saturatedFatPerEntry)),t=t.replace("[ITEM.FIBRE1]",n.display.formatFoodValue(u.fibrePerEntry)),t=t.replace("[ITEM.SALT1]",n.display.formatFoodValue(u.saltPerEntry)),t=t.replace("[ITEM.PROTEIN2]",n.display.formatFoodValue(u.proteinPerEntry)),t=t.replace("[ITEM.CARBOHYDRATES2]",n.display.formatFoodValue(u.carbohydratePerEntry)),t=t.replace("[ITEM.CALORIES2]",n.display.formatFoodValue(u.caloriesPerEntry)),t=t.replace("[ITEM.FAT2]",n.display.formatFoodValue(u.fatPerEntry)),t=t.replace("[ITEM.CALORIES3]",n.display.formatFoodValue(u.caloriesPerEntry)),i=new o,i.set("innerHTML",t),i.set("variableHeight",!0),i.set("moveTo","viewUpdateFoodEntry"),i.clickHandler=h(i,"click",function(t){return function(){n.actions.showUpdateFoodEntry(t)}}(u)),e.addChild(i))});r.length>0;)e.addChild(r.pop());e=u.byId("listMeasurementEntries"),t='<div class="Div-Info-Title-Left">                                               <span>[DAY.NAME]<\/span>                                                     <\/div>                                                                        '.replace("[DAY.NAME]",c.name),i=new o,i.set("innerHTML",t),e.addChild(i),f.forEach(c.measurementEntryDetails,function(r){t=y,t=t.replace("[ITEM.MEASUREMENTNAME]",r.measurementName.capitalizeWords()),t=t.replace("[ITEM.ENTRYTIME]",r.entryTime),t=t.replace("[ITEM.VALUE]",n.display.formatMeasurementValue(r.value)),t=t.replace("[ITEM.UNITNAME]",n.display.formatMeasurementValue(r.unitName)),i=new o,i.set("innerHTML",t),i.set("variableHeight",!0),i.set("moveTo","viewUpdateMeasurementEntry"),i.clickHandler=h(i,"click",function(t){return function(){n.actions.showUpdateMeasurementEntry(t)}}(r)),e.addChild(i)}),i=new o,i.set("label",""),i.set("rightText","Add Measurement"),i.set("moveTo","viewNewMeasurementEntryOptions"),i.clickHandler=h(i,"click",n.actions.showAddMeasurementEntry),e.addChild(i),window.app.display.resize()},searchListing:function(){var t=window.app.data,e=u.byId("listSearchMatches"),i,s,c;t.selectedSearch&&t.selectedSearch.matches&&(r.set("listSearchMatches","display",""),r.set("buttonMoreSearchMatches","display",""),t.selectedSearch.matches.length===0?(i=new o({variableHeight:!1,label:"No matches found"}),e.addChild(i),r.set("buttonMoreSearchMatches","display","none")):(f.forEach(t.selectedSearch.matches,function(t){i=new o({rightText:"Add",moveTo:"viewNewFoodEntryAmount",variableHeight:!0,label:t.description}),i.clickHandler=h(i,"click",function(t){return function(){n.actions.showFoodDetails(t)}}(t)),e.addChild(i),s=e.domNode}),t.selectedSearch.hasNoMoreData===!0&&r.set("buttonMoreSearchMatches","display","none"),s&&t.selectedSearch.matches.length>10&&(c=u.byId("viewSearchFood"),c.scrollIntoView(s,!1,.3))))},historyListing:function(){var t=window.app.data,l=u.byId("listHistoryEntries"),i,a,s,v,e;t.selectedHistory&&t.selectedHistory.entries&&(r.set("listHistoryEntries","display",""),r.set("buttonMoreHistoryItems","display",""),s=u.byId("categoryHistoryEntries"),s&&s.set("label",t.selectedHistory.mealtime.capitalizeWords()+" Items"),t.selectedHistory.entries.length===0?(i=new o({variableHeight:!1,label:"No matches found"}),l.addChild(i),r.set("buttonMoreHistoryItems","display","none")):(f.forEach(t.selectedHistory.entries,function(r){e=new Date(r.dayDate),e=c.format(e,{datePattern:"EEEE, d MMMM",selector:"date"}),v!==e&&(i=new o({variableHeight:!0,rightText:e}),l.addChild(i)),v=e,i=new o({rightText:"Add",moveTo:"viewDailyFoodEntries",variableHeight:!0,label:r.description}),i.clickHandler=h(i,"click",function(t,i,r){return function(){n.actions.addFoodEntry(t.amount,t.unitName,t.foodGuid,i.dayDate,r)}}(r,t.selectedDay,t.selectedMealTime)),l.addChild(i),a=l.domNode}),t.selectedHistory.hasNoMoreData===!0&&r.set("buttonMoreHistoryItems","display","none"),a&&t.selectedHistory.entries.length>10&&(s=u.byId("viewFoodEntryHistory"),s.scrollIntoView(a,!1,.3))))},foodDetails:function(){var p=window.app.data,t=p.selectedFood,i,c,a,v;if(t){var y=t.foodName,e=t.servingAmount,s="per 100g";t.brandName&&(y=y+" ("+t.brandName+")"),t.servingUnit&&(e=t.servingAmount+" "+t.servingUnit,t.servingAmount>1&&(e=e+"s")),t.servingWeight&&(e=e+" ("+t.servingWeight+"g)"),t.servingVolume&&(e=e+" ("+t.servingVolume+"ml)"),t.baselineCode==="W"?s="per 100g":t.baselineCode==="V"?s="per 100ml":t.baselineCode==="S"?s="per Serving":t.baselineCode==="P"&&(s="per Portion"),i=u.byId("listItemFoodName"),i&&i.set("label",y),i=u.byId("listItemFoodServingDescription"),i&&i.set("rightText",e),i=u.byId("listItemFoodBaselineName"),i&&i.set("rightText",s),e?r.set("listItemFoodServingDescription","display",""):i&&r.set("listItemFoodServingDescription","display","none"),i=u.byId("listItemFoodCalories"),i&&i.set("rightText",t.caloriePerBaseline),i=u.byId("listItemFoodProtein"),i&&i.set("rightText",t.proteinPerBaseline),i=u.byId("listItemFoodCarbohydrate"),i&&i.set("rightText",t.carbohydratePerBaseline),i=u.byId("listItemFoodSugar"),i&&i.set("rightText",t.sugarPerBaseline),i=u.byId("listItemFoodFat"),i&&i.set("rightText",t.fatPerBaseline),i=u.byId("listItemFoodSaturatedFat"),i&&i.set("rightText",t.saturatedFatPerBaseline),i=u.byId("listItemFoodFibre"),i&&i.set("rightText",t.fibrePerBaseline),i=u.byId("listItemFoodSalt"),i&&i.set("rightText",t.saltPerBaseline),c=u.byId("listAddFoodServings"),c&&(c.destroyDescendants(),a=1,v="g",t.servingAmount&&t.servingUnit&&t.servingAmount!==0&&(t.servingWeight?(v="g",a=t.servingWeight/t.servingAmount):t.servingVolume&&(v="ml",a=t.servingWeight/t.servingAmount),f.forEach(l,function(i){var u=Math.round(i.value*a),f=i.description+" "+t.servingUnit,e=f+i.sufix+" ("+u+v+")",r=new o({rightText:"Add",moveTo:"#viewDailyFoodEntries",variableHeight:!0,label:e});r.clickHandler=h(r,"click",function(t,i){return function(){n.actions.addSelectedFoodServing(t,i)}}(i.value,t.servingUnit)),c.addChild(r)})),c.getChildren().length?r.set("listAddFoodServings","display",""):r.set("listAddFoodServings","display","none"))}}},window.app.display})